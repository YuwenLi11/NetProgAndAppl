CC=gcc
#
# Define files generated by rpcgen
#
GFILES = get_file.h get_file_clnt.c get_file_svc.c get_file_xdr.c

#
# Define all program files
#
PROGS  = client server

#
# Define all program files
#
CFLAGS = -Wall -lrpcsvc -g -Werror

all: ${GFILES} ${PROGS}

clean:
	rm *.o ${PROGS} ${GFILES}

${GFILES}:
	rpcgen -N get_file.x

client: client_get_file.o get_file_clnt.o 
	${CC} ${CFLAGS} -o client client_get_file.o get_file_clnt.o

client_get_file.o:
	${CC} ${CFLAGS} -c client_get_file.c

get_file_clnt.o:
	${CC} ${CFLAGS} -c get_file_clnt.c 

server: get_file_svc.o remote_procedure.o
	${CC} ${CFLAGS} -o server remote_procedure.o get_file_svc.o 

get_file_svc.o:
	${CC} ${CFLAGS} -c get_file_svc.c

remote_procedure.o:
	${CC} ${CFLAGS} -c remote_procedure.c
